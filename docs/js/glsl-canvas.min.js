!function o(a,u,s){function f(t,e){if(!u[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=u[t]={exports:{}};a[t][0].call(i.exports,function(e){return f(a[t][1][e]||e)},i,i.exports,o,a,u,s)}return u[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)f(s[e]);return f}({1:[function(r,n,i){"use strict";function o(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e){return e&&e.__esModule?e:{default:e}};!function(e){if("object"===(void 0===n?"undefined":f(n))&&"object"===f(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./common","./context"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(e("./common")),s=l(e("./context")),f=function(){function a(e,t,r,n){h(this,a),e.getExtension("OES_texture_float"),e.activeTexture(e.TEXTURE0+n);var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.FLOAT,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var o=e.createFramebuffer();this.texture=i,this.buffer=o,this.BW=t,this.BH=r,this.index=n}return d(a,[{key:"resize",value:function(e,t,r){if(t!==this.BW||r!==this.BH){var n=this.buffer,i=this.texture,o=this.index;e.bindFramebuffer(e.FRAMEBUFFER,n);var a,u=e.checkFramebufferStatus(e.FRAMEBUFFER),s=Math.min(t,this.BW),f=Math.min(r,this.BH);u===e.FRAMEBUFFER_COMPLETE&&(a=new Float32Array(s*f*4),e.readPixels(0,0,s,f,e.RGBA,e.FLOAT,a)),e.bindFramebuffer(e.FRAMEBUFFER,null);var l=e.createTexture(),c=o+1;e.activeTexture(e.TEXTURE0+c),e.bindTexture(e.TEXTURE_2D,l),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.FLOAT,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a&&e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,f,e.RGBA,e.FLOAT,a);var h=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(i),e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,l),this.index=o,this.texture=l,this.buffer=h,this.BW=t,this.BH=r}}}]),a}();t.Buffer=f;var c=function(){function i(e,t,r,n){h(this,i),this.isValid=!1,this.index=e,this.key=t,this.vertexString=r,this.fragmentString=n}return d(i,[{key:"create",value:function(e,t,r){var n=s.default.createShader(e,this.vertexString,e.VERTEX_SHADER),i=s.default.createShader(e,this.fragmentString,e.FRAGMENT_SHADER,1);this.isValid=!!i||(i=s.default.createShader(e,"void main(){\n\tgl_FragColor = vec4(1.0);\n}",e.FRAGMENT_SHADER),!1);var o=s.default.createProgram(e,[n,i]),a=new f(e,t,r,this.index+0),u=new f(e,t,r,this.index+2);this.program=o,this.input=a,this.output=u,e.deleteShader(n),e.deleteShader(i)}},{key:"render",value:function(e,t,r){e.useProgram(this.program),e.viewport(0,0,t,r),e.bindFramebuffer(e.FRAMEBUFFER,this.output.buffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.output.texture,0),e.drawArrays(e.TRIANGLES,0,6);var n=this.input,i=this.output,o=n;this.input=i,this.output=o}},{key:"resize",value:function(e,t,r){e.useProgram(this.program),e.viewport(0,0,t,r),this.input.resize(e,t,r),this.output.resize(e,t,r)}},{key:"destroy",value:function(e){e.deleteProgram(this.program),this.program=null,this.input=null,this.output=null}}]),i}();t.IOBuffer=c;var n=function(e){function l(){return h(this,l),o(this,a(l).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,r.default),d(l,[{key:"count",get:function(){return 4*Object.keys(this.values).length}}],[{key:"getBuffers",value:function(e,t,r){var n=new l,i=0;if(t)for(var o,a=/(?:^\s*)((?:#if|#elif)(?:\s*)(defined\s*\(\s*BUFFER_)(\d+)(?:\s*\))|(?:#ifdef)(?:\s*BUFFER_)(\d+)(?:\s*))/gm;null!==(o=a.exec(t));){var u=o[3]||o[4],s="u_buffer"+u,f=new c(i,s,r,"#define BUFFER_"+u+"\n"+t);f.create(e,e.drawingBufferWidth,e.drawingBufferHeight),n.set(s,f),i+=4}return n}}]),l}();t.default=n})},{"./common":2,"./context":3}],2:[function(r,n,i){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if("object"===(void 0===n?"undefined":u(n))&&"object"===u(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.NumberMap=function e(){a(this,e)};var i=function e(){a(this,e)};t.StringMap=i;var r=function(){function e(){a(this,e),this.values=new i}var t,r,n;return t=e,(r=[{key:"has",value:function(e){return this.values.hasOwnProperty(e)}},{key:"set",value:function(e,t){this.values[e]=t}},{key:"get",value:function(e){return this.values[e]}},{key:"forEach",value:function(e){var t=0;for(var r in this.values)e(this.values[r],t,this.values),t++}},{key:"reduce",value:function(e,t){var r=t,n=0;for(var i in this.values)r=e(r,this.values[i],n,this.values),n++;return r}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=r})},{}],3:[function(r,n,i){"use strict";function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if("object"===(void 0===n?"undefined":o(n))&&"object"===o(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),(r=o=t.ContextError||(t.ContextError={}))[r.BrowserSupport=1]="BrowserSupport",r[r.Other=2]="Other";var a=function e(){f(this,e)};t.ContextVertexBuffers=a;var n=function(){function u(){f(this,u)}var e,t,r;return e=u,r=[{key:"tryGetContext",value:function(n,e,i){function t(e,t){if("function"==typeof i)i(e);else{var r=n.parentNode;r&&(r.innerHTML='<div class="glsl-canvas--error">'.concat(t,"</div>"))}}if(!WebGLRenderingContext)return t(o.BrowserSupport,'This page requires a browser that supports WebGL.<br/>\n\t\t\t<a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),null;var r=u.getContext(n,e);return r?r.getExtension("OES_standard_derivatives"):t(o.Other,'It does not appear your computer can support WebGL.<br/>\n\t\t\t<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),r}},{key:"getContext",value:function(e,t){for(var r=["webgl","experimental-webgl"],n=null,i=0;i<r.length;++i)try{n=e.getContext(r[i],t)}catch(e){if(n)break}return n}},{key:"createShader",value:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=e.createShader(r);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw u.lastError=e.getShaderInfoLog(i),console.error("*** Error compiling shader "+i+":"+u.lastError),e.deleteShader(i),{shader:i,source:t,type:r,error:u.lastError,offset:n};return i}},{key:"createProgram",value:function(e,t,r,n){for(var i=e.createProgram(),o=0;o<t.length;++o)e.attachShader(i,t[o]);if(r&&n)for(var a=0;a<r.length;++a)e.bindAttribLocation(i,n?n[a]:a,r[a]);return e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(u.lastError=e.getProgramInfoLog(i),console.log("Error in program linking:"+u.lastError),e.deleteProgram(i),null)}},{key:"createVertexBuffers",value:function(e,t){var r=new a,n=e.getAttribLocation(t,"a_texcoord");r.texcoord=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r.texcoord),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);var i=e.getAttribLocation(t,"a_position");return r.position=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r.position),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),r}}],(t=null)&&s(e.prototype,t),r&&s(e,r),u}();n.lastError="",t.default=n})},{}],4:[function(r,n,i){"use strict";function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=function(e){return e&&e.__esModule?e:{default:e}},E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};!function(e){if("object"===(void 0===n?"undefined":a(n))&&"object"===a(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./buffers","./context","./subscriber","./textures","./uniforms"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=g(e("./buffers")),u=g(e("./context")),r=g(e("./subscriber")),s=E(e("./textures")),m=E(e("./uniforms"));t.GlslCanvasOptions=function e(){y(this,e)};var v=function(){function e(){y(this,e),this.delay=0,this.current=0,this.delta=0,this.paused=!1,this.start=this.previous=performance.now()/1e3}return p(e,[{key:"play",value:function(){if(this.previous){var e=performance.now()/1e3;this.delay+=e-this.previous,this.previous=e}this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"next",value:function(){var e=performance.now()/1e3;return this.delta=e-this.previous,this.current=e-this.start-this.delay,this.previous=e,this}}]),e}();t.GlslCanvasTimer=v;var n=function(e){function o(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(y(this,o),(t=l(this,c(o).call(this))).dirty=!0,t.animated=!1,t.nDelta=0,t.nTime=0,t.nDate=0,t.nMouse=0,t.textureList=[],t.textures=new s.default,t.buffers=new a.default,t.uniforms=new m.default,t.mouse={x:0,y:0},t.valid=!1,t.visible=!1,!e)return l(t);t.canvas=e,t.width=e.clientWidth,t.height=e.clientHeight,t.rect=e.getBoundingClientRect(),t.vertexString=r.vertexString||"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nattribute vec2 a_position;\nattribute vec2 a_texcoord;\n\nvarying vec2 v_texcoord;\n\nvoid main(){\n\tgl_Position = vec4(a_position, 0.0, 1.0);\n\tv_texcoord = a_texcoord;\n}\n",t.fragmentString=r.fragmentString||"\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 v_texcoord;\n\nvoid main(){\n\tgl_FragColor = vec4(0.0);\n}\n";var i=u.default.tryGetContext(e,r,n.onError);return i?(t.gl=i,t.pixelRatio=window.devicePixelRatio||1,e.style.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",t.getShaders().then(function(e){t.load(),t.program&&(t.addListeners(),t.loop())},function(e){console.log("error",e)}),o.items.push(d(d(t))),t):l(t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,r.default),p(o,[{key:"fetch",value:function(n){return new Promise(function(e,t){var r=new XMLHttpRequest;r.onload=function(){e(r.response||r.responseText)},r.onerror=function(){t(new Error("Network request failed"))},r.ontimeout=function(){t(new Error("Network request failed"))},r.onabort=function(){t(new Error("Aborted"))},r.open("GET",n,!0),r.send(null)})}},{key:"getShaders",value:function(){var i=this;return new Promise(function(t,e){var r=i.canvas,n={};r.hasAttribute("data-vertex-url")&&(n.vertex=r.getAttribute("data-vertex-url")),r.hasAttribute("data-fragment-url")&&(n.fragment=r.getAttribute("data-fragment-url")),r.hasAttribute("data-vertex")&&(i.vertexString=r.getAttribute("data-vertex")),r.hasAttribute("data-fragment")&&(i.fragmentString=r.getAttribute("data-fragment")),Object.keys(n).length?Promise.all(Object.keys(n).map(function(t,e){var r=n[t];return i.fetch(r).then(function(e){return"vertex"===t?i.vertexString=e:i.fragmentString=e})})).then(function(e){t([i.vertexString,i.fragmentString])}):t([i.vertexString,i.fragmentString])})}},{key:"addListeners",value:function(){var r=this,e=function(e){r.rect=r.canvas.getBoundingClientRect()},t=function(e){r.rect=r.canvas.getBoundingClientRect()},n=function(e){r.mouse.x=e.clientX||e.pageX,r.mouse.y=e.clientY||e.pageY},i=function(e){r.toggle()};this.resize=e,this.scroll=t,this.mousemove=n,this.click=i,this.loop=function e(t){r.checkRender(),window.requestAnimationFrame(e)},window.addEventListener("resize",e),window.addEventListener("scroll",t),document.addEventListener("mousemove",n,!1),this.canvas.hasAttribute("controls")&&(this.canvas.addEventListener("click",i),this.canvas.hasAttribute("data-autoplay")||this.pause())}},{key:"load",value:function(e,t){t&&(this.vertexString=t),e&&(this.fragmentString=e);var r=this.gl,n=u.default.createShader(r,this.vertexString,r.VERTEX_SHADER),i=u.default.createShader(r,this.fragmentString,r.FRAGMENT_SHADER);this.valid=!!i||(i=u.default.createShader(r,"void main(){\n\t\t\t\tgl_FragColor = vec4(1.0);\n\t\t\t}",r.FRAGMENT_SHADER),!1);var o=u.default.createProgram(r,[n,i]);r.useProgram(o),r.deleteShader(n),r.deleteShader(i),this.program=o,this.valid&&(this.buffers=a.default.getBuffers(r,this.fragmentString,this.vertexString),this.vertexBuffers=u.default.createVertexBuffers(r,o),this.createUniforms()),this.trigger("load",{})}},{key:"test",value:function(c,h){var d=this;return new Promise(function(i,e){var o=d.vertexString,a=d.fragmentString,u=d.timer.paused,s=d.gl.getExtension("EXT_disjoint_timer_query"),f=s.createQueryEXT(),l=d.valid;(c||h)&&(d.load(c,h),l=d.valid,d.render()),d.timer.paused=!0,s.beginQueryEXT(s.TIME_ELAPSED_EXT,f),d.render(),s.endQueryEXT(s.TIME_ELAPSED_EXT);!function e(){d.render();var t=s.getQueryObjectEXT(f,s.QUERY_RESULT_AVAILABLE_EXT),r=d.gl.getParameter(s.GPU_DISJOINT_EXT);if(t&&!r){var n={wasValid:l,fragment:c||d.fragmentString,vertex:h||d.vertexString,timeElapsedMs:s.getQueryObjectEXT(f,s.QUERY_RESULT_EXT)/1e6};d.timer.paused=u,(c||h)&&d.load(a,o),i(n)}else window.requestAnimationFrame(e)}()})}},{key:"destroy",value:function(){this.animated=!1,this.valid=!1;var e=this.gl;for(var t in e.useProgram(null),e.deleteProgram(this.program),this.buffers.values){this.buffers.values[t].destroy(e)}this.buffers=null,this.textures=null,this.uniforms=null,this.program=null,this.gl=null,o.items.splice(o.items.indexOf(this),1)}},{key:"setUniform",value:function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=(t=m.default).parseUniform.apply(t,[e].concat(n));o&&(o.type===m.UniformType.Sampler2D?this.loadTexture(e,n[0]):this.uniforms.set(e,o))}},{key:"setUniforms",value:function(e){var r=this;e.forEach(function(e,t){r.setUniform.apply(r,[t].concat(f(e)))})}},{key:"pause",value:function(){this.valid&&(this.timer.pause(),this.canvas.classList.add("paused"))}},{key:"play",value:function(){this.valid&&(this.timer.play(),this.canvas.classList.remove("paused"))}},{key:"toggle",value:function(){this.valid&&(this.timer.paused?this.play():this.pause())}},{key:"isVisible",value:function(){var e=this.rect;return 0<e.top+e.height&&e.top<(window.innerHeight||document.documentElement.clientHeight)}},{key:"isAnimated",value:function(){return(this.animated||this.textures.animated)&&!this.timer.paused}},{key:"isDirty",value:function(){return this.dirty||this.uniforms.dirty||this.textures.dirty}},{key:"sizeDidChanged",value:function(){var e=this.gl,t=this.rect,r=t.width,n=t.height;if(this.width===r&&this.height===n)return!1;this.width=r,this.height=n;var i=Math.floor(r*this.pixelRatio),o=Math.floor(n*this.pixelRatio);for(var a in e.canvas.width===i&&e.canvas.height===o||(e.canvas.width=i,e.canvas.height=o),this.buffers.values){this.buffers.values[a].resize(e,i,o)}return!0}},{key:"checkRender",value:function(){this.isVisible()&&(this.sizeDidChanged()||this.isAnimated()||this.isDirty())?(this.render(),this.canvas.classList.add("playing")):this.canvas.classList.remove("playing")}},{key:"createUniforms",value:function(){var t=this,e=this.gl,r=this.fragmentString,n=e.drawingBufferWidth,i=e.drawingBufferHeight,o=this.timer=new v,a=1<(r.match(/u_delta/g)||[]).length,u=1<(r.match(/u_time/g)||[]).length,s=1<(r.match(/u_date/g)||[]).length,f=1<(r.match(/u_mouse/g)||[]).length,l=this.parseTextures(r);if(this.animated=u||s||f,this.animated?this.canvas.classList.add("animated"):this.canvas.classList.remove("animated"),this.uniforms.create(m.UniformMethod.Uniform2f,m.UniformType.FloatVec2,"u_resolution",n,i),a&&this.uniforms.create(m.UniformMethod.Uniform1f,m.UniformType.Float,"u_delta",o.delta),u&&this.uniforms.create(m.UniformMethod.Uniform1f,m.UniformType.Float,"u_time",o.current),s){var c=new Date;this.uniforms.create(m.UniformMethod.Uniform4f,m.UniformType.Float,"u_date",c.getFullYear(),c.getMonth(),c.getDate(),3600*c.getHours()+60*c.getMinutes()+c.getSeconds()+.001*c.getMilliseconds())}for(var h in f&&this.uniforms.create(m.UniformMethod.Uniform2f,m.UniformType.FloatVec2,"u_mouse",0,0),this.buffers.values){var d=this.buffers.values[h];this.uniforms.create(m.UniformMethod.Uniform1i,m.UniformType.Sampler2D,d.key,d.input.index)}l&&this.textureList.forEach(function(e){t.loadTexture(e.key,e.url)})}},{key:"parseTextures",value:function(e){for(var t,n=this,r=/uniform\s*sampler2D\s*([\w]*);(\s*\/\/\s*([\w|\:\/\/|\.|\-|\_]*)|\s*)/gm;null!==(t=r.exec(e));){var i=t[1];if(t[3]){var o=t[3].split(".").pop().toLowerCase(),a=t[3];a&&-1!==s.TextureExtensions.indexOf(o)&&this.textureList.push({key:i,url:a})}else this.buffers.has(i)||this.textureList.push({key:i,url:null})}this.canvas.hasAttribute("data-textures")&&this.canvas.getAttribute("data-textures").split(",").forEach(function(e,t){var r="u_tex"+t;n.textureList.push({key:r,url:e})});return 0<this.textureList.length}},{key:"loadTexture",value:function(r,e){var n=this;if(this.valid)return this.textures.createOrUpdate(this.gl,r,e,this.buffers.count).then(function(e){var t=e.index;n.uniforms.createTexture(r,t).texture=e;n.uniforms.create(m.UniformMethod.Uniform2f,m.UniformType.FloatVec2,r+"Resolution",e.width,e.height);return e});this.textureList.push({key:r,url:e})}},{key:"updateUniforms",value:function(){var e=this.gl,t=e.drawingBufferWidth,r=e.drawingBufferHeight,n=this.timer.next();if(this.uniforms.update(m.UniformMethod.Uniform2f,m.UniformType.FloatVec2,"u_resolution",t,r),this.uniforms.has("u_delta")&&this.uniforms.update(m.UniformMethod.Uniform1f,m.UniformType.Float,"u_delta",n.delta),this.uniforms.has("u_time")&&this.uniforms.update(m.UniformMethod.Uniform1f,m.UniformType.Float,"u_time",n.current),this.uniforms.has("u_date")){var i=new Date;this.uniforms.update(m.UniformMethod.Uniform4f,m.UniformType.Float,"u_date",i.getFullYear(),i.getMonth(),i.getDate(),3600*i.getHours()+60*i.getMinutes()+i.getSeconds()+.001*i.getMilliseconds())}if(this.uniforms.has("u_mouse")){var o=this.rect,a=this.mouse;if(a.x>=o.left&&a.x<=o.right&&a.y>=o.top&&a.y<=o.bottom){var u=(a.x-o.left)*this.pixelRatio,s=this.canvas.height-(a.y-o.top)*this.pixelRatio;this.uniforms.update(m.UniformMethod.Uniform2f,m.UniformType.FloatVec2,"u_mouse",u,s)}}for(var f in this.buffers.values){var l=this.buffers.values[f];this.uniforms.update(m.UniformMethod.Uniform1i,m.UniformType.Sampler2D,l.key,l.input.index)}for(var c in this.textures.values){var h=this.textures.values[c];h.tryUpdate(e),this.uniforms.update(m.UniformMethod.Uniform1i,m.UniformType.Sampler2D,h.key,h.index)}}},{key:"render",value:function(){var e=this.gl,t=e.drawingBufferWidth,r=e.drawingBufferHeight;for(var n in this.updateUniforms(),this.buffers.values){var i=this.buffers.values[n];this.uniforms.apply(e,i.program),i.render(e,t,r)}e.useProgram(this.program),this.uniforms.apply(e,this.program),e.viewport(0,0,t,r),e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawArrays(e.TRIANGLES,0,6),this.uniforms.clean(),this.textures.clean(),this.dirty=!1,this.trigger("render",{})}}],[{key:"version",value:function(){return"0.2.0"}},{key:"isDifferent",value:function(e,t){return!(!e||!t)&&e.toString()!==t.toString()}},{key:"of",value:function(t){return o.items.find(function(e){return e.canvas===t})||new o(t)}},{key:"loadAll",value:function(){return[].slice.call(document.getElementsByClassName("glsl-canvas")).filter(function(e){return e instanceof HTMLCanvasElement}).map(function(e){return o.of(e)})}}]),o}();n.items=[],t.default=n,window.GlslCanvas=n,document.addEventListener("DOMContentLoaded",n.loadAll)})},{"./buffers":1,"./context":3,"./subscriber":5,"./textures":6,"./uniforms":7}],5:[function(r,n,i){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if("object"===(void 0===n?"undefined":u(n))&&"object"===u(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,r){a(this,e),this.event=t,this.callback=r};t.Listener=i;var r=function(){function e(){a(this,e),this.listeners=new Set}var t,r,n;return t=e,(r=[{key:"logListeners",value:function(){this.listeners.forEach(function(e){return console.log(e)})}},{key:"subscribe",value:function(e){this.listeners.add(e)}},{key:"unsubscribe",value:function(e){this.listeners.delete(e)}},{key:"unsubscribeAll",value:function(){this.listeners.clear()}},{key:"on",value:function(e,t){return this.listeners.add(new i(e,t)),this}},{key:"off",value:function(t,e){var r=this;return e?this.listeners.delete(new i(t,e)):this.listeners.forEach(function(e){e.event===t&&r.listeners.delete(e)}),this}},{key:"trigger",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return this.listeners.forEach(function(e){e.event===t&&"function"==typeof e.callback&&e.callback.apply(e,r)}),this}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=r})},{}],6:[function(r,n,i){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e){return e&&e.__esModule?e:{default:e}};!function(e){if("object"===(void 0===n?"undefined":u(n))&&"object"===u(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./common","./subscriber"],e)}(function(e,s){Object.defineProperty(s,"__esModule",{value:!0});var f,t,a,r,n=y(e("./common")),i=y(e("./subscriber"));s.TextureImageExtensions=["jpg","jpeg","png"],s.TextureVideoExtensions=["ogv","webm","mp4"],s.TextureExtensions=s.TextureImageExtensions.concat(s.TextureVideoExtensions),(t=f||(f={}))[t.Data=0]="Data",t[t.Element=1]="Element",t[t.Url=2]="Url",(r=a||(a={})).MipMap="mipmap",r.Linear="linear",r.Nearest="nearest";var o=function e(){p(this,e)};s.TextureData=o;var l=function e(){p(this,e)};s.TextureOptions=l;var c=function(e){function u(e,t,r){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new l;return p(this,u),(n=d(this,m(u).call(this))).valid=!1,n.dirty=!1,n.animated=!1,n.powerOf2=!1,n.key=t,n.index=r,n.options=i,n.create(e),n}return v(u,i.default),h(u,[{key:"create",value:function(e){this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.setData(e,1,1,new Uint8Array([0,0,0,0]),{filtering:a.Linear})}},{key:"load",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof(this.options=t).url?void 0===this.url||t.url!==this.url?this.setUrl(e,t.url,t):Promise.resolve(this):t.element?this.setElement(e,t.element,t):t.data&&t.width&&t.height?this.setData(e,t.width,t.height,t.data,t):void 0}},{key:"setUrl",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this.valid){this.url=t,this.source=t,this.sourceType=f.Url,this.options=Object.assign(this.options,r);var n,i,o=t.split(".").pop().toLowerCase(),a=-1!==s.TextureVideoExtensions.indexOf(o);return n.src=(a?(n=document.createElement("video"),i=this.setElement(e,n,r),n.setAttribute("playsinline","true"),n.autoplay=!0,n.muted=!0):(n=new Image,i=this.setElement(e,n,r),u.isSafari()&&"data:"===t.slice(0,5)||(n.crossOrigin="anonymous")),t),i}}},{key:"setElement",value:function(o,a){var u=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.options=Object.assign(this.options,s),new Promise(function(t,r){var e=a;if("string"==typeof a&&(a=document.querySelector(a)),a instanceof HTMLCanvasElement||a instanceof HTMLImageElement||a instanceof HTMLVideoElement)if(u.source=a,u.sourceType=f.Element,a instanceof HTMLVideoElement){var n=a;n.addEventListener("loadeddata",function(e){u.update(o,s),u.setFiltering(o,s),t(u)}),n.addEventListener("error",function(e){r(e)})}else a instanceof HTMLImageElement?(a.addEventListener("load",function(){u.update(o,s),u.setFiltering(o,s),t(u)}),a.addEventListener("error",function(e){r(e)})):(u.update(o,s),u.setFiltering(o,s),t(u));else{var i="the 'element' parameter (`element: ".concat(JSON.stringify(e),"`) must be a CSS selector string, or a <canvas>, <image> or <video> object");console.log("Texture '".concat(u.key,"': ").concat(i),s),r(i)}})}},{key:"setData",value:function(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return this.width=t,this.height=r,this.options=Object.assign(this.options,i),this.source=n,this.sourceType=f.Data,this.update(e,i),this.setFiltering(e,i),Promise.resolve(this)}},{key:"update",value:function(e,t){if(this.valid){if(e.activeTexture(e.TEXTURE0+this.index),e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1===t.UNPACK_FLIP_Y_WEBGL?0:1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.UNPACK_PREMULTIPLY_ALPHA_WEBGL||0),this.sourceType===f.Element)this.source instanceof HTMLImageElement&&this.source.naturalWidth&&this.source.naturalHeight?(this.width=this.source.naturalWidth,this.height=this.source.naturalHeight,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.source)):this.source instanceof HTMLVideoElement&&this.source.videoWidth&&this.source.videoHeight?(this.width=this.source.videoWidth,this.height=this.source.videoHeight,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.source)):this.source instanceof HTMLCanvasElement&&(this.width=this.source.width,this.height=this.source.height,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.source));else if(this.sourceType===f.Data){var r=this.source;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,r)}this.trigger("loaded",this)}}},{key:"tryUpdate",value:function(e){var t=!1;return this.animated&&(t=!0,this.update(e,this.options)),t}},{key:"destroy",value:function(e){this.valid&&(e.deleteTexture(this.texture),this.texture=null,delete this.source,this.source=null,this.valid=!1)}},{key:"setFiltering",value:function(e,t){if(this.valid){var r=u.isPowerOf2(this.width)&&u.isPowerOf2(this.height),n=t.filtering||a.MipMap,i=t.TEXTURE_WRAP_S||t.repeat&&e.REPEAT||e.CLAMP_TO_EDGE,o=t.TEXTURE_WRAP_T||t.repeat&&e.REPEAT||e.CLAMP_TO_EDGE;r||(n=n===a.MipMap?a.Linear:n,i=o=e.CLAMP_TO_EDGE),this.powerOf2=r,this.filtering=n,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,o),this.filtering===a.MipMap?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D)):this.filtering===a.Nearest?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):this.filtering===a.Linear&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR))}}}],[{key:"isPowerOf2",value:function(e){return 0==(e&e-1)}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isTextureUrl",value:function(e){return/\.(jpg|jpeg|png|ogv|webm|mp4)$/i.test(e)}},{key:"isTexture",value:function(e){return void 0!==u.getTextureOptions(e)}},{key:"getMaxTextureSize",value:function(e){return e.getParameter(e.MAX_TEXTURE_SIZE)}},{key:"getTextureOptions",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){if(u.isTextureUrl(e))return t.url=e,t;document&&(e=document.querySelector(e))}return e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement?(t.element=e,t):e instanceof o?(t.data=e.data,t.width=e.width,t.height=e.height,t):void 0}}]),u}();s.Texture=c;var u=function(e){function t(){var e;return p(this,t),(e=d(this,m(t).apply(this,arguments))).count=0,e.dirty=!1,e.animated=!1,e}return v(t,n.default),h(t,[{key:"clean",value:function(){for(var e in this.values)this.values[e].dirty=!1;this.dirty=!1}},{key:"createOrUpdate",value:function(r,e,t){var n,i=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},u=c.getTextureOptions(t,a);return(n=this.get(e))||(n=new c(r,e,o+this.count,u),this.count++,this.set(e,n)),void 0!==u?n.load(r,u).then(function(e){if(e.source instanceof HTMLVideoElement){var t=e.source;t.addEventListener("play",function(){e.animated=!0,i.animated=!0}),t.addEventListener("pause",function(){e.animated=!1,i.animated=i.reduce(function(e,t){return e||t.animated},!1)}),t.addEventListener("seeked",function(){e.update(r,e.options),i.dirty=!0})}return e}):Promise.resolve(n)}}]),t}();s.default=u})},{"./common":2,"./subscriber":5}],7:[function(r,n,i){"use strict";function u(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(e){return e&&e.__esModule?e:{default:e}};!function(e){if("object"===(void 0===n?"undefined":y(n))&&"object"===y(n.exports)){var t=e(r,i);void 0!==t&&(n.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./common","./textures"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var f,r,l,n,i=s(e("./common")),c=e("./textures");(r=f=t.UniformMethod||(t.UniformMethod={})).Uniform1i="uniform1i",r.Uniform1iv="uniform1iv",r.Uniform2i="uniform2i",r.Uniform2iv="uniform2iv",r.Uniform3i="uniform3i",r.Uniform3iv="uniform3iv",r.Uniform4i="uniform4i",r.Uniform4iv="uniform4iv",r.Uniform1f="uniform1f",r.Uniform1fv="uniform1fv",r.Uniform2f="uniform2f",r.Uniform2fv="uniform2fv",r.Uniform3f="uniform3f",r.Uniform3fv="uniform3fv",r.Uniform4f="uniform4f",r.Uniform4fv="uniform4fv",r.UniformMatrix2fv="uniformMatrix2fv",r.UniformMatrix3fv="uniformMatrix3fv",r.UniformMatrix4fv="uniformMatrix4fv",(n=l=t.UniformType||(t.UniformType={}))[n.Bool=0]="Bool",n[n.BoolArray=1]="BoolArray",n[n.Int=2]="Int",n[n.IntArray=3]="IntArray",n[n.IntVec2=4]="IntVec2",n[n.IntVec2Array=5]="IntVec2Array",n[n.IntVec3=6]="IntVec3",n[n.IntVec3Array=7]="IntVec3Array",n[n.IntVec4=8]="IntVec4",n[n.IntVec4Array=9]="IntVec4Array",n[n.Float=10]="Float",n[n.FloatArray=11]="FloatArray",n[n.FloatVec2=12]="FloatVec2",n[n.FloatVec2Array=13]="FloatVec2Array",n[n.FloatVec3=14]="FloatVec3",n[n.FloatVec3Array=15]="FloatVec3Array",n[n.FloatVec4=16]="FloatVec4",n[n.FloatVec4Array=17]="FloatVec4Array",n[n.Sampler2D=18]="Sampler2D",n[n.Sampler2DArray=19]="Sampler2DArray",n[n.SamplerCube=20]="SamplerCube",n[n.SamplerCubeArray=21]="SamplerCubeArray",n[n.Matrix2fv=22]="Matrix2fv",n[n.Matrix3fv=23]="Matrix3fv",n[n.Matrix4fv=24]="Matrix4fv";var h=function(){function t(e){var n=this;v(this,t),this.dirty=!0,e&&Object.assign(this,e),this.apply=function(e,t){if(n.dirty){e.useProgram(t);var r=e.getUniformLocation(t,n.key);e[n.method].apply(e,[r].concat(n.values))}}}return p(t,null,[{key:"isDifferent",value:function(e,t){return!(!e||!t)&&e.toString()!==t.toString()}}]),t}();t.Uniform=h;var o=function(e){function t(e){return v(this,t),u(this,d(t).call(this,e))}return m(t,h),t}();t.UniformTexture=o;var a=function(e){function s(){var e;return v(this,s),(e=u(this,d(s).apply(this,arguments))).dirty=!1,e}return m(s,i.default),p(s,[{key:"clean",value:function(){for(var e in this.values)this.values[e].dirty=!1;this.dirty=!1}},{key:"setParse",value:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=s.parseUniform.apply(s,[e].concat(r));return i&&this.set(e,i),i}},{key:"create",value:function(e,t,r){for(var n=arguments.length,i=new Array(3<n?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];var a=new h({method:e,type:t,key:r,values:i});return this.set(r,a),this.dirty=!0,a}},{key:"createTexture",value:function(e,t){var r=new o({method:f.Uniform1i,type:l.Sampler2D,key:e,values:[t]});return this.set(e,r),this.dirty=!0,r}},{key:"update",value:function(e,t,r){for(var n=this.get(r),i=arguments.length,o=new Array(3<i?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];!n||n.method===e&&n.type===t&&n.values===o||(n.method=e,n.type=t,n.values=o,n.dirty=!0,this.dirty=!0)}},{key:"createOrUpdate",value:function(e,t,r){for(var n=arguments.length,i=new Array(3<n?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];this.has(r)?this.update.apply(this,[e,t,r].concat(i)):this.create.apply(this,[e,t,r].concat(i))}},{key:"apply",value:function(e,t){for(var r in this.values)this.values[r].apply(e,t)}}],[{key:"isArrayOfNumbers",value:function(e){return e.reduce(function(e,t){return e&&"number"==typeof t},!0)}},{key:"parseUniform",value:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i,o=1===r.length?r[0]:r;if("number"==typeof o)i=new h({method:f.Uniform1f,type:l.Float,key:e,values:[o]});else if("boolean"==typeof o)i=new h({method:f.Uniform1i,type:l.Bool,key:e,values:[o]});else if(c.Texture.isTexture(o))i=new h({method:f.Uniform1i,type:l.Sampler2D,key:e,values:o});else if(Array.isArray(o)){if(s.isArrayOfNumbers(o))switch(o.length){case 1:i=new h({method:f.Uniform1f,type:l.Float,key:e,values:o});break;case 2:i=new h({method:f.Uniform2fv,type:l.FloatVec2,key:e,values:o});break;case 3:i=new h({method:f.Uniform3fv,type:l.FloatVec3,key:e,values:o});break;case 4:i=new h({method:f.Uniform4fv,type:l.FloatVec4,key:e,values:o});break;default:i=new h({method:f.Uniform1fv,type:l.FloatArray,key:e,values:o})}else if(c.Texture.getTextureOptions(o[0]))i=new h({method:f.Uniform1iv,type:l.Sampler2D,key:e,values:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]){if(2<=o[0].length&&o[0].length<=4)for(var a=0;a<o.length;a++)switch(o.length){case 2:i=new h({method:f.Uniform2fv,type:l.FloatVec2,key:e+"["+a+"]",values:o});break;case 3:i=new h({method:f.Uniform3fv,type:l.FloatVec3,key:e+"["+a+"]",values:o});break;case 4:i=new h({method:f.Uniform4fv,type:l.FloatVec4,key:e+"["+a+"]",values:o})}}else if("object"===y(o[0]))for(var u=0;u<o.length;u++);}else y(o);return i}},{key:"parseUniforms",value:function(e,t){var r=new Map;for(var n in e){var i=e[n];t&&(n=t+"."+n);var o=s.parseUniform(n,i);o&&r.set(n,o)}return r}}]),s}();t.default=a})},{"./common":2,"./textures":6}]},{},[4]);
//# sourceMappingURL=glsl-canvas.min.js.map
